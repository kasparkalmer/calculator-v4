(()=>{"use strict";class t{constructor(t,e){this.operand1=t,this.operator=e,this.operand2}get operand1(){return this._operand1 instanceof t?this._operand1.getResult():this._operand1}set operand1(e){e instanceof t?this._operand1=e:isNaN(e)?alert("INTERNAL ERROR! Please refresh the page."):this._operand1=parseFloat(e)}get operator(){return this._operator}set operator(t){["+","-","*","/"].includes(t)?this._operator=t:alert("INTERNAL ERROR! Please refresh the page.")}getResult(){if(!this.operand2)return this.operand1;switch(this.operator){case"+":return this.operand1+parseFloat(this.operand2);case"-":return this.operand1-parseFloat(this.operand2);case"*":return this.operand1*parseFloat(this.operand2);case"/":return this.operand1/parseFloat(this.operand2);default:return 0}}}class e{constructor(){this.lastCalculation=void 0,this.currentInput="",this.waitingForInput=!0}operator(t){return"-"===t&&this.waitingForInput?this.input(t):isNaN(this.currentInput)?void 0:this.newCalculation(t)}newCalculation(e){return isNaN(this.currentInput)?this.currentInput:(this.lastCalculation&&this.lastCalculation.operand2?(this.lastCalculation=new t(this.lastCalculation,e),this.lastCalculation.operand2=this.currentInput):this.lastCalculation?(this.lastCalculation.operand2=this.currentInput,this.lastCalculation=new t(this.lastCalculation,e)):this.lastCalculation=new t(this.currentInput,e),this.currentInput="",this.waitingForInput=!0,this.lastCalculation.getResult())}equals(){if(this.lastCalculation.operand2){const e=new t(this.lastCalculation,this.lastCalculation.operator);e.operand2=this.lastCalculation.operand2,this.lastCalculation=e}else this.lastCalculation.operand2=this.currentInput,this.currentInput="";return this.lastCalculation.getResult()}input(t){return this.waitingForInput&&(this.waitingForInput=!1),"0"!==t||"0"!==this.currentInput&&"-0"!==this.currentInput?((!isNaN(t)||"-"===t||"."===t&&!this.currentInput.includes("."))&&this.currentInput.length<=10&&(this.currentInput=this.currentInput+t),this.currentInput):this.currentInput}clear(){return this.currentInput="",this.currentInput}clearEverything(){return this.lastCalculation=void 0,this.currentInput="",this.currentInput}removeLast(){const t=this.currentInput.length;return t?(this.currentInput=this.currentInput.substr(0,t-1),this.currentInput):this.lastCalculation.getResult()}}class n{constructor(){this.calculator=new e,this.screen=document.createElement("input"),this.clearButton=this.createButton("clear","CE","btn-danger disabled",(()=>this.clearClicked())),this.createCalculatorUI()}createCalculatorUI(){this.screen.type="text",this.screen.classList="calculator-screen z-depth-1",this.screen.value="",this.screen.disabled=!0;const t=document.createElement("div");t.classList.add("calculator");const e=document.createElement("button");e.classList="btn btn-danger remove-calculator-button",e.innerText="-",e.onclick=()=>t.remove(),t.append(e),t.append(this.screen),t.append(this.createButtons()),document.body.append(t)}createButtons(){const t=document.createElement("div");t.classList.add("calculator-keys"),t.append(this.createButton("+","+","btn-info operator",(()=>this.operatorClicked("+")))),t.append(this.createButton("-","-","btn-info operator",(()=>this.operatorClicked("-")))),t.append(this.createButton("*","&times;","btn-info operator",(()=>this.operatorClicked("*")))),t.append(this.createButton("/","&divide;","btn-info operator",(()=>this.operatorClicked("/"))));for(let e of["7","8","9","4","5","6","1","2","3","0"])t.append(this.createButton(e,e,"btn-light",(()=>this.inputClicked(e))));return t.append(this.createButton(".",".","btn-secondary",(()=>this.inputClicked(".")))),t.append(this.clearButton),t.append(this.createButton("=","=","equal-sign btn-secondary",(()=>this.equalsClicked()))),t}createButton(t,e,n,a){const s=document.createElement("button");return s.value=t,s.innerHTML=e,s.classList=n,s.classList.add("btn"),s.onclick=a,s}operatorClicked(t){this.setScreen(this.calculator.operator(t))}clearClicked(){"C"===this.clearButton.textContent?(this.screen.value=this.calculator.clear(),this.clearButton.textContent="CE"):(this.screen.value=this.calculator.clearEverything(),this.clearButton.classList.add("disabled"))}backspaceClicked(){this.screen.value=this.calculator.removeLast()}equalsClicked(){this.setScreen(this.calculator.equals())}inputClicked(t){this.screen.value=this.calculator.input(t),this.screen.value&&(this.clearButton.textContent="C",this.clearButton.classList.remove("disabled"))}setScreen(t){this.screen.value=t.toString().length>11?t.toExponential(6):t}}!function(){const t=document.createElement("button");t.classList="btn btn-info new-calculator-button",t.innerText="+",t.onclick=()=>new n,document.body.append(t)}(),new n})();